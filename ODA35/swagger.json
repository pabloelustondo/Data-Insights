{
    "swagger": "2.0",
    "info": {
        "description": "SOTI Data Analytics API will help you understand how your devices are working...blah.",
        "version": "1.0.0",
        "title": "SOTI Data Analytics API",
        "termsOfService": "http://helloreverb.com/terms/",
        "contact": {
            "name": "data_analytics@soti.net"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        }
    },
    "host": "localhost:8080",
    "basePath": "/v2",
    "schemes": [
        "http"
    ],
    "paths": {
        "/devices/didNotSurviveShiftSummary": {
            "get": {
                "tags": [
                    "device"
                ],
                "summary": "Finds the number of devices that did not last the shift",
                "description": "Finds the number of devices that did not last the shift .. blah..",
                "operationId": "didNotSurviveShiftSummary",
                "produces": [
                    "application/json",
                    "application/xml"
                ],
                "parameters": [
                    {
                        "in": "query",
                        "name": "shiftDuration",
                        "description": "shiftDuration (default to 8hs)",
                        "required": false,
                        "type": "number",
                        "format":"float"
                    },
                    {
                        "in": "query",
                        "name": "shiftStartDateTime",
                        "description": "shiftStartDateTime (default to yesterday)",
                        "required": false,
                        "type": "number",
                        "format":"float"
                    },
                    {
                        "in": "query",
                        "name": "minimumBatteryPercentageThreshold",
                        "description": "minimumBatteryPercentageThreshold (default to 20%)",
                        "required": false,
                        "type": "number",
                        "format":"float"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema":{
                            "$ref":"#/definitions/DeviceShiftBatteryMetrics"}
                    },
                "400": {
                    "description": "Invalid status value"
                }},
                 "security": [
                {
                    "devicestore_auth": [
                        "write_devices",
                        "read_devices"
                    ]
                }
            ]
        }
    },
        "/devices/didNotSurviveShiftList": {
            "get": {
                "tags": [
                    "device"
                ],
            "summary": "Finds the lsit of devices that did not last the shit",
            "description": "Find the devices that ",
            "operationId": "didNotSurviveShiftList",
            "produces": [
            "application/json",
            "application/xml"
            ],
            "parameters": [
            {
                "in": "query",
                "name": "shiftDuration",
                "description": "shiftDuration (default to 8hs)",
                "required": false,
                "type": "number",
                "format":"float"
            },
            {
                "in": "query",
                "name": "shiftStartDateTime",
                "description": "shiftStartDateTime (default to yesterday)",
                "required": false,
                "type": "number",
                "format":"float"
            },
                {
                "in": "query",
                "name": "minimumBatteryPercentageThreshold",
                "description": "minimumBatteryPercentageThreshol(default to 20%)",
                "required": false,
                "type": "number",
                "format":"float"
            },
            {
                "in": "query",
                "name": "rowsTake",
                "description": "rows to take per call (default to 100)",
                "required": false,
                "type": "number",
                "format":"float"
            },
            {
                "in": "query",
                "name": "rowsSkip",
                "description": "rows to skip, default to 0",
                "required": false,
                "type": "number",
                "format":"float"
            }
            ],
            "responses": {
                "200": {
                    "description": "successful operation",
                    "schema": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/DeviceBatteryInfo"
                        }
                    }
                },
                "400": {
                   "description": "Invalid tag value"
                }
            },
            "security": [
                {
                    "devicestore_auth": [
                    "write_devices",
                    "read_devices"
                    ]
                }
            ]
    }
    },
        "/devices/{deviceId}": {
        "get": {
        "tags": [
        "device"
        ],
        "summary": "Find device by ID",
        "description": "Returns a device when ID < 10.  ID > 10 or nonintegers will simulate API error conditions",
        "operationId": "getDeviceById",
        "produces": [
        "application/json",
        "application/xml"
        ],
        "parameters": [
        {
        "in": "path",
        "name": "deviceId",
        "description": "ID of device that needs to be fetched",
        "required": true,
        "type": "integer",
        "format": "int64"
        }
        ],
        "responses": {
        "200": {
        "description": "successful operation",
        "schema": {
        "$ref": "#/definitions/DeviceBatteryInfo"
        }
        },
        "400": {
        "description": "Invalid ID supplied"
        },
        "404": {
        "description": "Device not found"
        }
        },
        "security": [
        {
        "api_key": []
        },
        {
        "devicestore_auth": [
        "write_devices",
        "read_devices"
        ]
        }
        ]
        }
        }
},
"securityDefinitions": {
"api_key": {
"type": "apiKey",
"name": "api_key",
"in": "header"
},
"devicestore_auth": {
"type": "oauth2",
"authorizationUrl": "http://devicestore.swagger.io/api/oauth/dialog",
"flow": "implicit",
"scopes": {
"write_devices": "modify devices in your account",
"read_devices": "read your devices"
}
}
},
"definitions": {
    "DeviceShiftBatteryMetrics": {
    "type": "object",
        "properties": {
        "CountDevicesNotLastedShift": {
        "type": "integer",
        "format": "int64"
        },
        "CountDevicesLastedShift": {
        "type": "integer",
        "format": "int64"
        },
        "CountDevicesChargingEntireShift": {
        "type": "integer",
        "format": "int64"
        },
        "CountTotalActiveDevices": {
        "type": "integer",
        "format": "int64"
        }
    }
    },
    "DeviceBatteryInfo": {
    "type": "object",
    "properties": {
        "DeviceId": {
        "type": "string"
        },
        "LastBatteryStatus": {
        "type": "string"
        },
        "BatteryChargeLevel": {
        "type": "array",
        "items": {
            "type": "integer"
            }
        }
    }
    }
}
}